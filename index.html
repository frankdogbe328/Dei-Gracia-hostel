<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dei-Gratcia Hostel - Abeka-Ghana</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- No external dependencies - completely standalone -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            text-decoration: none;
        }

        .logo span {
            color: #3498db;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9, #1f5f8b);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #7f8c8d, #6c7b7d);
            transform: translateY(-2px);
        }

        main {
            padding: 3rem 0;
        }

        .hero {
            text-align: center;
            color: white;
            margin-bottom: 4rem;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .hero-location {
            font-size: 1.1rem;
            color: #ecf0f1;
            margin-bottom: 2rem;
        }

        /* Location Map Section Styles */
        .location-section {
            margin: 4rem 0;
            padding: 2rem 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 20px;
        }

        .location-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }

        .location-info h2 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 1.5rem;
        }

        .location-info p {
            margin: 0.8rem 0;
            font-size: 1.1rem;
            color: #34495e;
        }

        .location-info p strong {
            color: #2c3e50;
            font-weight: 600;
        }

        .location-features {
            margin-top: 2rem;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin: 1rem 0;
            padding: 0.8rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            font-size: 1.5rem;
        }

        .map-container {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .map-container iframe {
            width: 100%;
            height: 400px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .map-overlay {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
        }

        .map-overlay .btn {
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .map-overlay .btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Responsive design for map section */
        @media (max-width: 768px) {
            .location-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .map {
                height: 300px;
            }

            .location-info h2 {
                font-size: 1.5rem;
            }

            .location-info p {
                font-size: 1rem;
            }
        }

        .text-center {
            text-align: center;
        }

        .hidden {
            display: none;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 2rem;
            border-radius: 15px 15px 0 0;
            text-align: center;
        }

        .modal-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .modal-header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .close {
            color: white;
            float: right;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            transition: all 0.3s ease;
        }

        .close:hover {
            transform: scale(1.2);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-row.full {
            grid-template-columns: 1fr;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-group input[type="file"] {
            padding: 8px;
            border: 2px dashed #bdc3c7;
            background: #f8f9fa;
        }

        .form-group input[type="file"]:hover {
            border-color: #3498db;
            background: #ecf0f1;
        }

        /* Room Selection */
        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .room-card {
            background: white;
            border: 3px solid transparent;
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .room-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .room-card.selected {
            border-color: #3498db;
            background: #ecf0f1;
        }

        .room-type {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .room-price {
            font-size: 1.5rem;
            color: #27ae60;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .room-availability {
            font-size: 0.9rem;
            color: #3498db;
            font-weight: 600;
            margin-bottom: 1rem;
            padding: 0.3rem 0.8rem;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 15px;
            display: inline-block;
        }

        .room-features {
            list-style: none;
            padding: 0;
        }

        .room-features li {
            padding: 0.3rem 0;
            color: #7f8c8d;
            position: relative;
            padding-left: 1.5rem;
        }

        .room-features li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
        }

        /* Payment */
        .payment-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 2rem;
            color: white;
            margin-bottom: 2rem;
        }

        .payment-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .payment-header h4 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .payment-header p {
            opacity: 0.9;
        }

        .momo-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .momo-number {
            background: #2c3e50;
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            margin: 1rem 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 2px solid #3498db;
        }

        .payment-instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .payment-instructions ol {
            text-align: left;
            margin: 0;
            padding-left: 1.5rem;
        }

        .payment-instructions li {
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }

        .proof-upload {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .proof-upload h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .upload-area {
            border: 3px dashed #3498db;
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: #2980b9;
            background: #ecf0f1;
        }

        .upload-area.dragover {
            border-color: #27ae60;
            background: #d5f4e6;
        }

        .upload-icon {
            font-size: 3rem;
            color: #3498db;
            margin-bottom: 1rem;
        }

        .upload-text {
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }

        .upload-hint {
            font-size: 0.9rem;
            color: #95a5a6;
        }

        .file-preview {
            margin-top: 1rem;
            padding: 1rem;
            background: #ecf0f1;
            border-radius: 8px;
            display: none;
        }

        .file-preview img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
        }

        .file-info {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        /* Upload loading and success states */
        .upload-loading {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            border: 2px dashed #dee2e6;
        }

        .loading-spinner {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: #6c757d;
            font-weight: 500;
        }

        .upload-success {
            margin-top: 1rem;
            padding: 1rem;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            text-align: center;
            color: #155724;
        }

        .success-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .success-text {
            font-weight: 500;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Mobile-specific improvements */
        @media (max-width: 768px) {
            .upload-area {
                padding: 2rem 1rem;
            }
            
            .upload-loading,
            .upload-success {
                margin: 1rem 0;
                padding: 1.5rem 1rem;
            }
            
            .payment-instructions ol {
                padding-left: 1.5rem;
            }
            
            .payment-instructions li {
                margin-bottom: 0.75rem;
                line-height: 1.5;
            }
            
            .btn {
                padding: 16px 24px;
                font-size: 1.1rem;
                min-height: 50px;
            }
            
            .text-center {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }
            
            .text-center .btn {
                width: 100%;
            }
        }

        /* Button loading states */
        .btn-loading {
            display: none;
        }

        .btn.processing .btn-text {
            display: none;
        }

        .btn.processing .btn-loading {
            display: inline;
        }

        /* Mobile Payment Status */
        .mobile-payment-status {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .status-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .status-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .status-progress {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }

        .progress-bar {
            background: white;
            height: 100%;
            width: 0%;
            animation: progress 2s ease-in-out infinite;
        }

        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        /* Mobile Alerts */
        .mobile-alert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            z-index: 10000;
            max-width: 90%;
            animation: slideDown 0.3s ease-out;
        }

        .mobile-alert.success {
            border-left: 4px solid #27ae60;
        }

        .mobile-alert.error {
            border-left: 4px solid #e74c3c;
        }

        .mobile-alert.info {
            border-left: 4px solid #3498db;
        }

        .alert-content {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .alert-icon {
            font-size: 1.5rem;
        }

        .alert-text {
            font-weight: 500;
            color: #2c3e50;
        }

        @keyframes slideDown {
            from {
                transform: translateX(-50%) translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        /* Bed Assignment Styles */
        .bed-assignment {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }

        .bed-number {
            font-size: 2rem;
            font-weight: bold;
            margin: 0.5rem 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .room-assignment {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .bed-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .bed-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 2px solid transparent;
        }

        .bed-item.occupied {
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
        }

        .bed-item.available {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
        }

        .bed-item-number {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .bed-item-status {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .bed-item-location {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 0.3rem;
        }

        /* Enhanced Admin Panel Styles */
        .admin-panel {
            background: white;
            border-radius: 15px;
            padding: 0;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .admin-panel.hidden {
            display: none;
        }

        /* Admin Header */
        .admin-header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header-left h2 {
            margin: 0;
            font-size: 2rem;
            color: white;
        }

        .admin-subtitle {
            margin: 0.5rem 0 0 0;
            opacity: 0.8;
            font-size: 1rem;
        }

        .admin-header-right {
            display: flex;
            gap: 1rem;
        }

        /* Admin Navigation */
        .admin-nav {
            background: #f8f9fa;
            padding: 0;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            overflow-x: auto;
        }

        .nav-tab {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-size: 1rem;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: #e9ecef;
            color: #495057;
        }

        .nav-tab.active {
            color: #3498db;
            border-bottom-color: #3498db;
            background: white;
        }

        .nav-tab i {
            margin-right: 0.5rem;
        }

        /* Admin Tabs */
        .admin-tab {
            display: none;
            padding: 2rem;
        }

        .admin-tab.active {
            display: block;
        }

        /* Statistics Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .stat-icon.pending {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .stat-icon.confirmed {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .stat-icon.revenue {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
        }

        .stat-content h3 {
            font-size: 2rem;
            margin: 0;
            color: #2c3e50;
        }

        .stat-content p {
            margin: 0.5rem 0;
            color: #6c757d;
            font-weight: 500;
        }

        .stat-change {
            font-size: 0.8rem;
            color: #6c757d;
        }

        .stat-change.positive {
            color: #27ae60;
        }

        /* Quick Actions */
        .quick-actions {
            margin-bottom: 2rem;
        }

        .quick-actions h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .action-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        .action-card i {
            font-size: 2rem;
            color: #3498db;
            margin-bottom: 0.5rem;
        }

        .action-card span {
            display: block;
            color: #2c3e50;
            font-weight: 500;
        }

        /* Tab Headers */
        .tab-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-header h3 {
            color: #2c3e50;
            margin: 0;
        }

        .tab-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-input {
            padding: 0.5rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .filter-select {
            padding: 0.5rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .date-input {
            padding: 0.5rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        /* Room Management */
        .room-management-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .room-config-card,
        .room-availability-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }

        .room-config-card h4,
        .room-availability-card h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        /* Reports Grid */
        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .report-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }

        .report-card h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .chart-container {
            height: 300px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }

        /* Settings Modal */
        .settings-tabs {
            display: flex;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 2rem;
        }

        .settings-tab {
            background: none;
            border: none;
            padding: 1rem 2rem;
            cursor: pointer;
            color: #6c757d;
            border-bottom: 3px solid transparent;
        }

        .settings-tab.active {
            color: #3498db;
            border-bottom-color: #3498db;
        }

        .settings-content {
            display: none;
        }

        .settings-content.active {
            display: block;
        }

        .notification-options {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .notification-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        /* Enhanced Tables */
        .bookings-table-container,
        .users-table-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .bookings-table,
        .users-table {
            width: 100%;
            border-collapse: collapse;
        }

        .bookings-table th,
        .bookings-table td,
        .users-table th,
        .users-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .bookings-table th,
        .users-table th {
            background: #2c3e50;
            color: white;
            font-weight: 600;
        }

        .bookings-table tr:hover,
        .users-table tr:hover {
            background: #f8f9fa;
        }

        /* Status Badges */
        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background: #f39c12;
            color: white;
        }

        .status-confirmed {
            background: #27ae60;
            color: white;
        }

        .status-paid {
            background: #2ecc71;
            color: white;
        }

        .status-cancelled {
            background: #e74c3c;
            color: white;
        }

        /* Booking Actions */
        .booking-actions {
            display: flex;
            gap: 0.3rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .btn-sm:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        /* Room Status Grid (Enhanced) */
        .room-status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .room-status-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
        }

        .room-status-card h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .room-beds {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
        }

        .room-bed {
            background: white;
            border-radius: 8px;
            padding: 0.8rem;
            text-align: center;
            border: 2px solid #e0e0e0;
            font-size: 0.9rem;
        }

        .room-bed.occupied {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
        }

        .room-bed.available {
            background: #2ecc71;
            color: white;
            border-color: #27ae60;
        }

        /* Enhanced bed allocation display */
        .bed-allocation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .bed-allocation-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 0.8rem;
            border: 1px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .bed-allocation-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .bed-allocation-item.occupied {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border-color: #c0392b;
        }

        .bed-allocation-item.available {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border-color: #27ae60;
        }

        .student-name {
            font-weight: 600;
            margin-top: 0.3rem;
            font-size: 0.9rem;
        }

        .bed-location {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-top: 0.2rem;
        }

        /* Recent Activity */
        .recent-activity {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }

        .recent-activity h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .activity-content h4 {
            margin: 0;
            font-size: 1rem;
            color: #2c3e50;
        }

        .activity-content p {
            margin: 0.2rem 0 0 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            /* General mobile improvements */
            .container {
                padding: 0 15px;
            }
            
            /* Header mobile improvements */
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            .nav-buttons {
                flex-direction: column;
                width: 100%;
                gap: 0.5rem;
            }
            
            .nav-buttons .btn {
                width: 100%;
                padding: 14px 20px;
            }
            
            /* Main content mobile improvements */
            main {
                padding: 1rem 0;
            }
            
            .hero {
                padding: 2rem 1rem;
                text-align: center;
            }
            
            .hero h1 {
                font-size: 2rem;
                margin-bottom: 1rem;
            }
            
            .hero p {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }
            
            /* Room cards mobile improvements */
            .rooms-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
                padding: 0 1rem;
            }
            
            .room-card {
                margin: 0;
                padding: 1.5rem;
            }
            
            .room-card h3 {
                font-size: 1.3rem;
            }
            
            .room-price {
                font-size: 1.5rem;
            }
            
            /* Modal mobile improvements */
            .modal-content {
                width: 95%;
                margin: 10px;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .booking-step {
                padding: 1rem;
            }
            
            .booking-step h3 {
                font-size: 1.3rem;
                margin-bottom: 1rem;
            }
            
            /* Form mobile improvements */
            .form-group {
                margin-bottom: 1rem;
            }
            
            .form-group label {
                font-size: 0.9rem;
                margin-bottom: 0.3rem;
            }
            
            .form-group input,
            .form-group select {
                padding: 12px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Payment section mobile improvements */
            .payment-container {
                padding: 1rem;
            }
            
            .payment-instructions ol {
                padding-left: 1.2rem;
            }
            
            .payment-instructions li {
                margin-bottom: 0.5rem;
                font-size: 0.9rem;
            }
            
            .momo-card {
                padding: 1rem;
            }
            
            .momo-number {
                font-size: 1rem;
                padding: 0.8rem;
            }
            
            /* Upload area mobile improvements */
            .upload-area {
                padding: 1.5rem 1rem;
                margin: 1rem 0;
            }
            
            .upload-text {
                font-size: 0.9rem;
            }
            
            .upload-hint {
            font-size: 0.8rem;
            }
            
            /* Buttons mobile improvements */
            .btn {
                padding: 14px 20px;
                font-size: 1rem;
                min-height: 48px;
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .text-center {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }
            
            /* Admin panel mobile improvements */
            .admin-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
                padding: 1rem;
            }

            .admin-nav {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .nav-tab {
                flex: 1;
                min-width: 100px;
                padding: 0.8rem 0.5rem;
                font-size: 0.9rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .stat-card {
                padding: 1rem;
            }

            .room-management-grid {
                grid-template-columns: 1fr;
            }

            .reports-grid {
                grid-template-columns: 1fr;
            }

            .tab-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .actions-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }
            
            /* Tables mobile improvements */
            .bookings-table-container,
            .users-table-container {
                overflow-x: auto;
            }
            
            .bookings-table,
            .users-table {
                font-size: 0.8rem;
                min-width: 600px;
            }
            
            .bookings-table th,
            .bookings-table td,
            .users-table th,
            .users-table td {
                padding: 0.5rem 0.3rem;
            }
            
            /* Bed status mobile improvements */
            .bed-status {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }
            
            .bed-item {
                padding: 0.8rem;
                font-size: 0.9rem;
            }
            
            .bed-item-number {
                font-size: 1rem;
            }
        }
        
        /* Extra small devices */
        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .room-card {
                padding: 1rem;
            }
            
            .modal-content {
                width: 98%;
                margin: 5px;
            }
            
            .booking-step {
                padding: 0.8rem;
            }
            
            .nav-tab {
                min-width: 80px;
                font-size: 0.8rem;
                padding: 0.6rem 0.3rem;
            }
            
            .btn {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
        }

        .booking-step {
            padding: 2rem;
        }

        .booking-step.hidden {
            display: none;
        }

        .booking-step h3 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        
        /* Form improvements for mobile */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 0;
            }
        }

        /* Local Storage Auth Styles */
        .auth-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .auth-modal {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .auth-tab {
            flex: 1;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .auth-tab.active {
            border-bottom-color: #3498db;
            color: #3498db;
            font-weight: 600;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .auth-form input {
            width: 100%;
            padding: 12px;
            margin-bottom: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .auth-form input:focus {
            border-color: #3498db;
            outline: none;
        }

        .auth-btn {
            width: 100%;
            padding: 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .auth-btn:hover {
            background: #2980b9;
        }

        .auth-error {
            color: #e74c3c;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .auth-success {
            color: #27ae60;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 1rem;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* User info styles */
        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: auto;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .logout-btn {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0.5rem;
            border-radius: 5px;
            transition: background 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(231, 76, 60, 0.1);
        }
    </style>
</head>
<body>
    <!-- Firebase Auth Container -->
    <div id="authContainer" class="auth-container">
        <div class="auth-modal">
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="showAuthTab('login')">Login</div>
                <div class="auth-tab" onclick="showAuthTab('register')">Register</div>
            </div>
            
            <div id="loginForm" class="auth-form active">
                <input type="email" id="loginEmail" name="loginEmail" placeholder="Email" autocomplete="email" required>
                <input type="password" id="loginPassword" name="loginPassword" placeholder="Password" autocomplete="current-password" required>
                <button class="auth-btn" onclick="loginUser()">Login</button>
                <div id="loginError" class="auth-error"></div>
            </div>
            
            <div id="registerForm" class="auth-form">
                <input type="text" id="registerName" name="registerName" placeholder="Full Name" autocomplete="name" required>
                <input type="email" id="registerEmail" name="registerEmail" placeholder="Email" autocomplete="email" required>
                <input type="password" id="registerPassword" name="registerPassword" placeholder="Password (min 6 characters)" autocomplete="new-password" required>
                <button class="auth-btn" onclick="registerUser()">Register</button>
                <div id="registerError" class="auth-error"></div>
            </div>
            
            <div id="authLoading" class="loading">
                <div class="spinner"></div>
                <p>Processing...</p>
            </div>
        </div>
    </div>

    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">Dei-Gratcia <span>Hostel</span></a>
                <div class="nav-buttons">
                    <div id="userInfo" class="user-info" style="display: none;">
                        <div class="user-avatar" id="userAvatar">A</div>
                        <span id="userName">Admin</span>
                        <button class="logout-btn" onclick="logoutUser()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                    <button id="adminLoginBtn" class="btn btn-secondary" onclick="showAuthModal()">Admin Login</button>
                    <button class="btn btn-primary" onclick="openBookingModal()">Book Now</button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="hero">
                <h1>Welcome to Dei-Gratcia Hostel</h1>
                <p class="hero-location">📍 Abeka-Ghana</p>
                <p>Your home away from home. Comfortable, affordable, and convenient student accommodation.</p>
                <button class="btn btn-primary" onclick="openBookingModal()">Book Your Room Today</button>
            </div>
            
            <!-- Location Map Section -->
            <div class="location-section">
                <div class="location-content">
                    <div class="location-info">
                        <h2>📍 Find Us</h2>
                        <p><strong>Dei Gratia Hostel</strong></p>
                        <p>📍 (formerly Royal Hostel)</p>
                        <p>📍 Accra, Ghana</p>
                        <p>📞 Contact: +233 54 532 6363</p>
                        <p>📧 Email: info@deigratciahostel.com</p>
                        <div class="location-features">
                            <div class="feature">
                                <span class="feature-icon">🚌</span>
                                <span>Near major transport routes</span>
                            </div>
                            <div class="feature">
                                <span class="feature-icon">🏫</span>
                                <span>Close to universities</span>
                            </div>
                            <div class="feature">
                                <span class="feature-icon">🛒</span>
                                <span>Near shopping centers</span>
                            </div>
                        </div>
                    </div>
                    <div class="map-container">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3438.224025781181!2d-0.24256802575652556!3d5.602285433184065!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xfdf9970cb6737c5%3A0xd897a2c2c84e3318!2sDei%20Gratia%20hostel%20(formerly%20Royal%20hostel)!5e1!3m2!1sen!2sgh!4v1754572509251!5m2!1sen!2sgh" 
                            width="100%" 
                            height="400" 
                            style="border:0; border-radius: 15px;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                        <div class="map-overlay">
                            <button class="btn btn-primary" onclick="openInMaps()">
                                📍 Open in Maps
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Enhanced Admin Panel -->
    <section id="adminPanel" class="admin-panel hidden">
        <!-- Admin Header -->
        <div class="admin-header">
            <div class="admin-header-left">
        <h2 class="section-title">Admin Dashboard</h2>
                <p class="admin-subtitle">Manage bookings, rooms, and users</p>
            </div>
            <div class="admin-header-right">
                <button class="btn btn-secondary" onclick="showAdminSettings()">
                    <i class="fas fa-cog"></i> Settings
                </button>
                <button class="btn btn-danger" onclick="logoutAdmin()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Admin Navigation -->
        <div class="admin-nav">
            <button class="nav-tab active" onclick="showAdminTab('dashboard')">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="nav-tab" onclick="showAdminTab('bookings')">
                <i class="fas fa-calendar-check"></i> Bookings
            </button>
            <button class="nav-tab" onclick="showAdminTab('rooms')">
                <i class="fas fa-bed"></i> Room Management
            </button>
            <button class="nav-tab" onclick="showAdminTab('users')">
                <i class="fas fa-users"></i> User Management
            </button>
            <button class="nav-tab" onclick="showAdminTab('reports')">
                <i class="fas fa-chart-bar"></i> Reports
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboardTab" class="admin-tab active">
            <!-- Statistics Cards -->
            <div class="stats-grid">
            <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="stat-content">
                <h3 id="totalBookings">0</h3>
                <p>Total Bookings</p>
                        <span class="stat-change positive">+12% this month</span>
                    </div>
            </div>
            <div class="stat-card">
                    <div class="stat-icon pending">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                <h3 id="pendingBookings">0</h3>
                <p>Pending</p>
                        <span class="stat-change">Awaiting approval</span>
                    </div>
            </div>
            <div class="stat-card">
                    <div class="stat-icon confirmed">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                <h3 id="confirmedBookings">0</h3>
                <p>Confirmed</p>
                        <span class="stat-change positive">+8% this week</span>
                    </div>
            </div>
            <div class="stat-card">
                    <div class="stat-icon revenue">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="stat-content">
                <h3 id="totalRevenue">GHS 0</h3>
                <p>Total Revenue</p>
                        <span class="stat-change positive">+15% this month</span>
                    </div>
            </div>
        </div>
        
            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <div class="actions-grid">
                    <button class="action-card" onclick="showAdminTab('bookings')">
                        <i class="fas fa-plus"></i>
                        <span>New Booking</span>
                    </button>
                    <button class="action-card" onclick="showAdminTab('rooms')">
                        <i class="fas fa-bed"></i>
                        <span>Manage Rooms</span>
                    </button>
                    <button class="action-card" onclick="showAdminTab('users')">
                        <i class="fas fa-user-plus"></i>
                        <span>Add User</span>
                    </button>
                    <button class="action-card" onclick="generateReport()">
                        <i class="fas fa-download"></i>
                        <span>Export Report</span>
                    </button>
                </div>
            </div>

            <!-- Room Status Overview -->
            <div class="room-overview">
                <h3>Room Status Overview</h3>
        <div class="room-status-grid" id="roomStatusGrid">
            <!-- Room status will be populated here -->
                </div>
        </div>
        
            <!-- Recent Activity -->
            <div class="recent-activity">
                <h3>Recent Activity</h3>
                <div class="activity-list" id="activityList">
                    <!-- Activity items will be populated here -->
                </div>
            </div>
        </div>

        <!-- Bookings Tab -->
        <div id="bookingsTab" class="admin-tab">
            <div class="tab-header">
                <h3>Booking Management</h3>
                <div class="tab-actions">
                    <input type="text" id="bookingSearch" placeholder="Search bookings..." class="search-input">
                    <select id="statusFilter" class="filter-select">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="confirmed">Confirmed</option>
                        <option value="paid">Paid</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                    <button class="btn btn-primary" onclick="exportBookings()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
            
            <div class="bookings-table-container">
        <table class="bookings-table">
            <thead>
                <tr>
                            <th>Student Name</th>
                    <th>Index Number</th>
                    <th>Institution</th>
                    <th>Room Type</th>
                    <th>Bed Number</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Date</th>
                            <th>Actions</th>
                </tr>
            </thead>
            <tbody id="bookingsTableBody">
                <!-- Bookings will be populated here -->
            </tbody>
        </table>
            </div>
        </div>

        <!-- Room Management Tab -->
        <div id="roomsTab" class="admin-tab">
            <div class="tab-header">
                <h3>Room Management</h3>
                <button class="btn btn-primary" onclick="showAddRoomModal()">
                    <i class="fas fa-plus"></i> Add New Room
                </button>
            </div>
            
            <div class="room-management-grid">
                <div class="room-config-card">
                    <h4>Room Configuration</h4>
                    <div class="room-config-list" id="roomConfigList">
                        <!-- Room configurations will be populated here -->
                    </div>
                </div>
                
                <div class="room-availability-card">
                    <h4>Current Availability</h4>
                    <div class="availability-chart" id="availabilityChart">
                        <!-- Availability chart will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- User Management Tab -->
        <div id="usersTab" class="admin-tab">
            <div class="tab-header">
                <h3>User Management</h3>
                <button class="btn btn-primary" onclick="showAddUserModal()">
                    <i class="fas fa-user-plus"></i> Add New User
                </button>
            </div>
            
            <div class="users-table-container">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Last Login</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Users will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reportsTab" class="admin-tab">
            <div class="tab-header">
                <h3>Reports & Analytics</h3>
                <div class="report-actions">
                    <select id="reportType" class="filter-select">
                        <option value="booking">Booking Report</option>
                        <option value="revenue">Revenue Report</option>
                        <option value="occupancy">Occupancy Report</option>
                        <option value="user">User Activity Report</option>
                    </select>
                    <input type="date" id="reportStartDate" class="date-input">
                    <input type="date" id="reportEndDate" class="date-input">
                    <button class="btn btn-primary" onclick="generateReport()">
                        <i class="fas fa-chart-bar"></i> Generate Report
                    </button>
                </div>
            </div>
            
            <div class="reports-grid">
                <div class="report-card">
                    <h4>Booking Trends</h4>
                    <div class="chart-container" id="bookingChart">
                        <!-- Chart will be populated here -->
                    </div>
                </div>
                
                <div class="report-card">
                    <h4>Revenue Analysis</h4>
                    <div class="chart-container" id="revenueChart">
                        <!-- Chart will be populated here -->
                    </div>
                </div>
                
                <div class="report-card">
                    <h4>Room Occupancy</h4>
                    <div class="chart-container" id="occupancyChart">
                        <!-- Chart will be populated here -->
                    </div>
                </div>
                
                <div class="report-card">
                    <h4>Top Institutions</h4>
                    <div class="chart-container" id="institutionChart">
                        <!-- Chart will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Settings Modal -->
    <div id="adminSettingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAdminSettings()">&times;</span>
            <div class="modal-header">
                <h2>Admin Settings</h2>
            </div>
            
            <div class="settings-tabs">
                <button class="settings-tab active" onclick="showSettingsTab('profile')">Profile</button>
                <button class="settings-tab" onclick="showSettingsTab('security')">Security</button>
                <button class="settings-tab" onclick="showSettingsTab('notifications')">Notifications</button>
            </div>
            
            <div id="profileSettings" class="settings-content active">
                <h3>Profile Information</h3>
                <form id="adminProfileForm">
                    <div class="form-group">
                        <label for="adminName">Full Name</label>
                        <input type="text" id="adminName" name="adminName" value="Admin User" autocomplete="name">
                    </div>
                    <div class="form-group">
                        <label for="adminEmail">Email</label>
                        <input type="email" id="adminEmail" name="adminEmail" value="admin@hostel.com" autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label for="adminPhone">Phone</label>
                        <input type="tel" id="adminPhone" name="adminPhone" value="+233 123 456 789" autocomplete="tel">
                    </div>
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
            </div>
            
            <div id="securitySettings" class="settings-content">
                <h3>Security Settings</h3>
                <form id="adminSecurityForm">
                    <div class="form-group">
                        <label for="currentPassword">Current Password</label>
                        <input type="password" id="currentPassword" name="currentPassword" autocomplete="current-password" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" name="newPassword" autocomplete="new-password" required>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm New Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" autocomplete="new-password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Change Password</button>
                </form>
            </div>
            
            <div id="notificationSettings" class="settings-content">
                <h3>Notification Preferences</h3>
                <div class="notification-options">
                    <div class="notification-option">
                        <input type="checkbox" id="emailNotifications" checked>
                        <label for="emailNotifications">Email Notifications</label>
                    </div>
                    <div class="notification-option">
                        <input type="checkbox" id="smsNotifications">
                        <label for="smsNotifications">SMS Notifications</label>
                    </div>
                    <div class="notification-option">
                        <input type="checkbox" id="bookingAlerts" checked>
                        <label for="bookingAlerts">New Booking Alerts</label>
                    </div>
                    <div class="notification-option">
                        <input type="checkbox" id="paymentAlerts" checked>
                        <label for="paymentAlerts">Payment Alerts</label>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="saveNotificationSettings()">Save Preferences</button>
            </div>
        </div>
    </div>

    <!-- Add Room Modal -->
    <div id="addRoomModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddRoomModal()">&times;</span>
            <div class="modal-header">
                <h2>Add New Room</h2>
            </div>
            
            <form id="addRoomForm">
                <div class="form-group">
                    <label for="roomType">Room Type</label>
                    <select id="roomType" name="roomType" autocomplete="off" required>
                        <option value="">Select Room Type</option>
                        <option value="6-person">6 in a Room</option>
                        <option value="4-person">4 in a Room</option>
                        <option value="3-person">3 in a Room</option>
                        <option value="2-person">2 in a Room (Buy Your Own Light)</option>
                        <option value="2-person-prepaid">2 in a Room (Prepaid Light)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="roomCount">Number of Rooms</label>
                    <input type="number" id="roomCount" name="roomCount" min="1" autocomplete="off" required>
                </div>
                <div class="form-group">
                    <label for="bedsPerRoom">Beds per Room</label>
                    <input type="number" id="bedsPerRoom" name="bedsPerRoom" min="1" autocomplete="off" required>
                </div>
                <div class="form-group">
                    <label for="roomPrice">Price per Bed</label>
                    <input type="number" id="roomPrice" name="roomPrice" min="0" step="0.01" autocomplete="off" required>
                </div>
                <div class="form-group">
                    <label for="roomDescription">Description</label>
                    <textarea id="roomDescription" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddRoomModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Room</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddUserModal()">&times;</span>
            <div class="modal-header">
                <h2>Add New User</h2>
            </div>
            
            <form id="addUserForm">
                <div class="form-group">
                    <label for="userName">Full Name</label>
                    <input type="text" id="userName" name="userName" autocomplete="name" required>
                </div>
                <div class="form-group">
                    <label for="userEmail">Email</label>
                    <input type="email" id="userEmail" name="userEmail" autocomplete="email" required>
                </div>
                <div class="form-group">
                    <label for="userRole">Role</label>
                    <select id="userRole" name="userRole" autocomplete="off" required>
                        <option value="">Select Role</option>
                        <option value="admin">Administrator</option>
                        <option value="manager">Manager</option>
                        <option value="staff">Staff</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="userPassword">Password</label>
                    <input type="password" id="userPassword" name="userPassword" autocomplete="new-password" required>
                </div>
                <div class="form-group">
                    <label for="userConfirmPassword">Confirm Password</label>
                    <input type="password" id="userConfirmPassword" name="userConfirmPassword" autocomplete="new-password" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddUserModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBookingModal()">&times;</span>
            <div class="modal-header">
                <h2>Student Booking Form</h2>
                <p>Fill in your details to book a room</p>
            </div>
            
            <!-- Step 1: Student Information -->
            <div id="step1Content" class="booking-step">
                <h3>Student Information</h3>
                <form id="personalForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" name="firstName" autocomplete="given-name" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" name="lastName" autocomplete="family-name" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="indexNumber">Index Number</label>
                            <input type="text" id="indexNumber" name="indexNumber" autocomplete="off" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" autocomplete="tel" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" autocomplete="email" required>
                        </div>
                        <div class="form-group">
                            <label for="institution">Institution</label>
                            <input type="text" id="institution" name="institution" autocomplete="organization" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="program">Program of Study</label>
                            <input type="text" id="program" name="program" autocomplete="off" required>
                        </div>
                        <div class="form-group">
                            <label for="level">Level/Year</label>
                            <select id="level" name="level" autocomplete="off" required>
                                <option value="">Select Level</option>
                                <option value="100">Level 100</option>
                                <option value="200">Level 200</option>
                                <option value="300">Level 300</option>
                                <option value="400">Level 400</option>
                                <option value="500">Level 500</option>
                                <option value="600">Level 600</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row full">
                        <div class="form-group">
                            <label for="studentIdImage">Picture of Student ID</label>
                            <input type="file" id="studentIdImage" name="studentIdImage" accept="image/*" autocomplete="off" required>
                            <small style="color: #7f8c8d;">Upload a clear picture of your student ID card</small>
                        </div>
                    </div>
                    <div class="form-row full">
                        <div class="form-group">
                            <label for="checkInDate">Check-in Date</label>
                            <input type="date" id="checkInDate" name="checkInDate" autocomplete="off" required>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Next Step</button>
                    </div>
                </form>
            </div>

            <!-- Step 2: Room Selection -->
            <div id="step2Content" class="booking-step hidden">
                <h3>Select Your Room Type</h3>
                <div class="rooms-grid">
                    <div class="room-card" onclick="selectRoom('6-person', 2600)">
                        <div class="room-type">6 in a Room</div>
                        <div class="room-price">GHS 2,600</div>
                        <div class="room-availability" id="availability-6-person">1 room available</div>
                        <ul class="room-features">
                            <li>Shared accommodation</li>
                            <li>Basic amenities</li>
                            <li>WiFi included</li>
                            <li>Only 1 room available</li>
                        </ul>
                    </div>
                    <div class="room-card" onclick="selectRoom('4-person', 2600)">
                        <div class="room-type">4 in a Room</div>
                        <div class="room-price">GHS 2,600</div>
                        <div class="room-availability" id="availability-4-person">4 rooms available</div>
                        <ul class="room-features">
                            <li>Shared accommodation</li>
                            <li>Basic amenities</li>
                            <li>WiFi included</li>
                            <li>4 rooms available</li>
                        </ul>
                    </div>
                    <div class="room-card" onclick="selectRoom('3-person', 3000)">
                        <div class="room-type">3 in a Room</div>
                        <div class="room-price">GHS 3,000</div>
                        <div class="room-availability" id="availability-3-person">1 room available</div>
                        <ul class="room-features">
                            <li>Less crowded</li>
                            <li>More space</li>
                            <li>WiFi included</li>
                            <li>Only 1 room available</li>
                        </ul>
                    </div>
                    <div class="room-card" onclick="selectRoom('2-person', 3400)">
                        <div class="room-type">2 in a Room (Buy Your Own Light)</div>
                        <div class="room-price">GHS 3,400</div>
                        <div class="room-availability" id="availability-2-person">4 buildings available</div>
                        <ul class="room-features">
                            <li>Private space</li>
                            <li>Premium amenities</li>
                            <li>WiFi included</li>
                            <li>4 buildings available</li>
                        </ul>
                    </div>
                    <div class="room-card" onclick="selectRoom('2-person-prepaid', 3600)">
                        <div class="room-type">2 in a Room (Prepaid Light)</div>
                        <div class="room-price">GHS 3,600</div>
                        <div class="room-availability" id="availability-2-person-prepaid">2 rooms available</div>
                        <ul class="room-features">
                            <li>Prepaid electricity</li>
                            <li>Premium amenities</li>
                            <li>WiFi included</li>
                            <li>2 different rooms available</li>
                        </ul>
                    </div>
                </div>
                <div class="text-center">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Previous</button>
                    <button class="btn btn-primary" onclick="nextStep()" id="nextBtn1" disabled>Next Step</button>
                </div>
            </div>

            <!-- Step 3: Payment -->
            <div id="step3Content" class="booking-step hidden">
                <h3>Payment Information</h3>
                <div id="paymentSummary" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                    <!-- Payment summary will be populated here -->
                </div>
                
                <div class="payment-container">
                    <div class="payment-header">
                        <h4>💳 MTN Mobile Money Payment</h4>
                        <p>Complete your booking with secure mobile payment</p>
                    </div>
                    
                    <div class="momo-card">
                        <div class="momo-number">
                            📱 Send payment to: <strong>0545326363</strong>
                        </div>
                        
                        <div class="payment-instructions">
                            <ol>
                                <li>Open your MTN Mobile Money app</li>
                                <li>Select "Send Money" or "Transfer"</li>
                                <li>Enter the number: <strong>0545326363</strong></li>
                                <li>Enter the amount: <strong id="paymentAmount">GHS 0</strong></li>
                                <li>Add reference: <strong id="paymentReference">Your Name</strong></li>
                                <li>Complete the transaction</li>
                            </ol>
                        </div>
                    </div>
                </div>
                
                                 <div class="proof-upload">
                     <h4>📸 Submit Proof of Payment</h4>
                     <p style="text-align: center; color: #7f8c8d; margin-bottom: 1.5rem;">
                         Upload a screenshot of your payment confirmation
                     </p>
                     
                     <div class="upload-area" onclick="document.getElementById('paymentProof').click()" ontouchstart="this.style.transform='scale(0.95)'" ontouchend="this.style.transform='scale(1)'">
                         <div class="upload-icon">📁</div>
                         <div class="upload-text">Tap to upload payment proof</div>
                         <div class="upload-hint">PNG, JPG, JPEG up to 5MB</div>
                         <input type="file" id="paymentProof" accept="image/*" style="display: none;" onchange="handlePaymentProofUpload(event)" capture="environment">
                     </div>
                     
                     <div class="file-preview" id="filePreview">
                         <img id="previewImage" src="" alt="Payment proof preview">
                         <div class="file-info" id="fileInfo"></div>
                     </div>
                 </div>

                 <!-- Bed Assignment Preview -->
                 <div class="bed-assignment" id="bedAssignment" style="display: none;">
                     <h4>🛏️ Your Bed Assignment</h4>
                     <div class="bed-number" id="assignedBedNumber">Bed 1</div>
                     <div class="room-assignment">
                         <p><strong>Room Type:</strong> <span id="bedRoomType">4 in a Room</span></p>
                         <p><strong>Available Beds:</strong></p>
                         <div class="bed-status" id="bedStatus">
                             <!-- Bed status will be populated here -->
                         </div>
                     </div>
                 </div>
                
                <div class="text-center">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Previous</button>
                    <button class="btn btn-primary" onclick="completeBooking()" id="completeBtn" disabled>
                        <span class="btn-text">Complete Booking</span>
                        <span class="btn-loading" style="display: none;">⏳ Processing...</span>
                    </button>
                </div>
                
                <!-- Mobile Payment Status -->
                <div class="mobile-payment-status" id="mobilePaymentStatus" style="display: none;">
                    <div class="status-icon">📱</div>
                    <div class="status-text">Payment processing...</div>
                    <div class="status-progress">
                        <div class="progress-bar"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <div class="modal-header">
                <h2>Admin Login</h2>
                <p>Access the admin panel</p>
            </div>
            <div style="padding: 2rem;">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" autocomplete="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" autocomplete="current-password" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // COMPLETELY CLEAN LOCAL STORAGE SYSTEM - NO DUPLICATES
        let currentStep = 1;
        let selectedRoom = null;
        let currentUser = null;

        // Initialize local storage system with fallback
        function initializeLocalStorage() {
            console.log('Local storage system initialized');
            
            // Test localStorage availability
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                console.log('✅ localStorage is available');
            } catch (error) {
                console.error('❌ localStorage not available:', error);
                alert('⚠️ Warning: Local storage is not available. Some features may not work properly.');
                return;
            }
            
            // Initialize default admin if not exists
            try {
                const admins = JSON.parse(localStorage.getItem('admins') || '[]');
                if (admins.length === 0) {
                    const defaultAdmin = {
                        name: 'Admin',
                        email: 'admin@hostel.com',
                        password: 'admin123',
                        role: 'admin'
                    };
                    admins.push(defaultAdmin);
                    localStorage.setItem('admins', JSON.stringify(admins));
                    console.log('Default admin created');
                }
            } catch (error) {
                console.error('❌ Error initializing admin data:', error);
            }
        }

        // Enhanced booking function with better error handling
        function completeBooking() {
            console.log('🚀 Starting booking process...');
            
            try {
                // Get form values with debugging
                const firstName = document.getElementById('firstName');
                const lastName = document.getElementById('lastName');
                const email = document.getElementById('email');
                const phone = document.getElementById('phone');
                const indexNumber = document.getElementById('indexNumber');
                const institution = document.getElementById('institution');
                const program = document.getElementById('program');
                const level = document.getElementById('level');
                const checkInDate = document.getElementById('checkInDate');
                const paymentProof = document.getElementById('paymentProof');
                
                // Debug: Check if all elements exist
                console.log('🔍 Form elements check:', {
                    firstName: !!firstName,
                    lastName: !!lastName,
                    email: !!email,
                    phone: !!phone,
                    indexNumber: !!indexNumber,
                    institution: !!institution,
                    program: !!program,
                    level: !!level,
                    checkInDate: !!checkInDate,
                    paymentProof: !!paymentProof
                });
                
                // Get trimmed values
                const firstNameValue = firstName ? firstName.value.trim() : '';
                const lastNameValue = lastName ? lastName.value.trim() : '';
                const emailValue = email ? email.value.trim() : '';
                const phoneValue = phone ? phone.value.trim() : '';
                const indexNumberValue = indexNumber ? indexNumber.value.trim() : '';
                const institutionValue = institution ? institution.value.trim() : '';
                const programValue = program ? program.value.trim() : '';
                const levelValue = level ? level.value : '';
                const checkInDateValue = checkInDate ? checkInDate.value : '';
                
                // Debug: Log all values
                console.log('📝 Form values:', {
                    firstName: firstNameValue,
                    lastName: lastNameValue,
                    email: emailValue,
                    phone: phoneValue,
                    indexNumber: indexNumberValue,
                    institution: institutionValue,
                    program: programValue,
                    level: levelValue,
                    checkInDate: checkInDateValue,
                    selectedRoom: selectedRoom,
                    paymentProof: paymentProof ? paymentProof.files[0] : null
                });
                
                // Enhanced validation
                if (!firstNameValue || !lastNameValue || !emailValue || !phoneValue || !indexNumberValue || 
                    !institutionValue || !programValue || !levelValue || !checkInDateValue) {
                    console.log('❌ Validation failed - missing fields');
                    alert('❌ Please fill in all required fields before completing the booking.');
                    return;
                }
                
                if (!paymentProof || !paymentProof.files || !paymentProof.files[0]) {
                    console.log('❌ Validation failed - no payment proof');
                    alert('❌ Please upload payment proof before completing the booking.');
                    return;
                }
                
                if (!selectedRoom) {
                    console.log('❌ Validation failed - no room selected');
                    alert('❌ Please select a room type before completing the booking.');
                    return;
                }
                
                // Validate email format
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(emailValue)) {
                    console.log('❌ Validation failed - invalid email');
                    alert('❌ Please enter a valid email address.');
                    return;
                }
                
                // Validate phone number (basic validation)
                const phoneRegex = /^[\+]?[0-9\s\-\(\)]{10,}$/;
                if (!phoneRegex.test(phoneValue)) {
                    console.log('❌ Validation failed - invalid phone');
                    alert('❌ Please enter a valid phone number.');
                    return;
                }
                
                console.log('✅ All validations passed, creating booking object...');
                
                // Create comprehensive booking object
                const booking = {
                    firstName: firstNameValue,
                    lastName: lastNameValue,
                    email: emailValue,
                    phone: phoneValue,
                    indexNumber: indexNumberValue,
                    institution: institutionValue,
                    program: programValue,
                    level: levelValue,
                    checkInDate: checkInDateValue,
                    roomType: selectedRoom.type,
                    amount: selectedRoom.price,
                    paymentProof: paymentProof.files[0].name,
                    paymentProofSize: paymentProof.files[0].size,
                    paymentProofType: paymentProof.files[0].type,
                    date: new Date().toLocaleDateString(),
                    bookingId: 'BK-' + Date.now(),
                    status: 'pending',
                    createdAt: new Date().toISOString()
                };
                
                // Save to localStorage with enhanced error handling
                try {
                    // Check if localStorage is available
                    if (typeof(Storage) === "undefined") {
                        throw new Error('localStorage is not supported in this browser');
                    }
                    
                    // Test localStorage write access
                    try {
                        localStorage.setItem('test', 'test');
                        localStorage.removeItem('test');
                    } catch (testError) {
                        throw new Error('localStorage write access denied');
                    }
                    
                    const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
                    console.log('📊 Current bookings count:', bookings.length);
                    
                    // Check for duplicate bookings (same email and room type)
                    const existingBooking = bookings.find(b => 
                        b.email === email && b.roomType === selectedRoom.type && b.status !== 'cancelled'
                    );
                    
                    if (existingBooking) {
                        alert('❌ You already have a booking for this room type. Please check your existing bookings.');
                        return;
                    }
                    
                    // Check localStorage quota (rough estimate)
                    const currentDataSize = JSON.stringify(bookings).length;
                    const newBookingSize = JSON.stringify(booking).length;
                    const totalSize = currentDataSize + newBookingSize;
                    
                    console.log('📏 Data size check:', {
                        current: currentDataSize,
                        new: newBookingSize,
                        total: totalSize
                    });
                    
                    // If data is getting too large, clean up old bookings
                    if (totalSize > 5000000) { // 5MB limit
                        console.log('🧹 Cleaning up old bookings due to size limit');
                        // Keep only last 50 bookings
                        const recentBookings = bookings.slice(-50);
                        localStorage.setItem('bookings', JSON.stringify(recentBookings));
                        bookings.length = 0;
                        bookings.push(...recentBookings);
                    }
                    
                    bookings.push(booking);
                    const finalData = JSON.stringify(bookings);
                    
                    // Try to save with size check
                    if (finalData.length > 10000000) { // 10MB hard limit
                        throw new Error('Booking data too large. Please contact support.');
                    }
                    
                    localStorage.setItem('bookings', finalData);
                    console.log('✅ Booking saved successfully to localStorage');
                    
                    // Show comprehensive success message
                    const successMessage = `
                        🎉 BOOKING SUCCESSFUL!
                        
                        📋 Booking Details:
                        • Name: ${firstNameValue} ${lastNameValue}
                        • Email: ${emailValue}
                        • Phone: ${phoneValue}
                        • Index Number: ${indexNumberValue}
                        • Institution: ${institutionValue}
                        • Program: ${programValue}
                        • Level: ${levelValue}
                        • Room Type: ${selectedRoom.type}
                        • Amount: GHS ${selectedRoom.price}
                        • Check-in Date: ${checkInDateValue}
                        • Booking ID: ${booking.bookingId}
                        • Status: Pending Confirmation
                        
                        ✅ Your booking has been submitted successfully!
                        📧 You will receive a confirmation email shortly.
                        ⏳ Please wait for admin confirmation.
                    `;
                    
                    alert(successMessage);
                    
                    // Close modal and reset form
                    document.getElementById('bookingModal').style.display = 'none';
                    document.getElementById('personalForm').reset();
                    
                    // Reset file preview
                    const filePreview = document.getElementById('filePreview');
                    if (filePreview) {
                        filePreview.style.display = 'none';
                    }
                    
                    // Reset variables
                    selectedRoom = null;
                    currentStep = 1;
                    
                    // Reset step visibility
                    document.getElementById('step1Content').classList.remove('hidden');
                    document.getElementById('step2Content').classList.add('hidden');
                    document.getElementById('step3Content').classList.add('hidden');
                    
                    console.log('🎯 Booking process completed successfully!');
                    
                } catch (storageError) {
                    console.error('❌ Storage error details:', {
                        error: storageError.message,
                        name: storageError.name,
                        stack: storageError.stack
                    });
                    
                    // Provide specific error messages based on error type
                    let errorMessage = '❌ Error saving booking. ';
                    
                    if (storageError.message.includes('localStorage is not supported')) {
                        errorMessage += 'Your browser does not support local storage. Please try a different browser.';
                    } else if (storageError.message.includes('write access denied')) {
                        errorMessage += 'Storage access denied. Please check your browser settings or try in normal browsing mode.';
                    } else if (storageError.message.includes('too large')) {
                        errorMessage += 'Data size limit reached. Please contact support.';
                    } else {
                        errorMessage += 'Please try again or contact support if the problem persists.';
                    }
                    
                    alert(errorMessage);
                    return;
                }
                
            } catch (error) {
                console.error('❌ Booking error:', error);
                alert('❌ An unexpected error occurred. Please try again or contact support.');
                return;
            }
        }

        // Modal functions
        function openBookingModal() {
            document.getElementById('bookingModal').style.display = 'block';
            currentStep = 1;
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').style.display = 'none';
        }

        // Room selection
        function selectRoom(type, price) {
            selectedRoom = { type, price };
            
            // Update visual selection
            document.querySelectorAll('.room-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.room-card').classList.add('selected');
            
            // Enable next button if we're on step 2
            validateStep2();
            
            console.log('Room selected:', type, price);
        }

        // Admin functions
        function showAuthModal() {
            document.getElementById('authContainer').style.display = 'flex';
        }

        function hideAuthModal() {
            document.getElementById('authContainer').style.display = 'none';
        }

        function showAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            if (tab === 'login') {
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.getElementById('registerForm').classList.add('active');
            }
        }

        function loginUser() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                document.getElementById('loginError').textContent = 'All fields are required';
                return;
            }
            
            const admins = JSON.parse(localStorage.getItem('admins') || '[]');
            const user = admins.find(admin => admin.email === email && admin.password === password);
            
            if (user) {
                currentUser = user;
                hideAuthModal();
                showAdminPanel();
                console.log('Login successful:', user.name);
            } else {
                document.getElementById('loginError').textContent = 'Invalid credentials';
            }
        }

        function showAdminPanel() {
            document.getElementById('adminPanel').style.display = 'block';
            updateAdminPanel();
        }

        function hideAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
        }

        function updateAdminPanel() {
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            const total = bookings.length;
            const pending = bookings.filter(b => b.status === 'pending').length;
            
            document.getElementById('totalBookings').textContent = total;
            document.getElementById('pendingBookings').textContent = pending;
            
            updateBookingsTable(bookings);
        }

        function updateBookingsTable(bookings) {
            const tbody = document.getElementById('bookingsTableBody');
            if (tbody) {
                tbody.innerHTML = '';
                
                bookings.forEach(booking => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${booking.firstName} ${booking.lastName}</td>
                        <td>${booking.roomType}</td>
                        <td>GHS ${booking.amount}</td>
                        <td>${booking.status}</td>
                        <td>${booking.date}</td>
                        <td>
                            <button onclick="confirmBooking('${booking.bookingId}')" class="btn btn-sm btn-success">Confirm</button>
                            <button onclick="viewBooking('${booking.bookingId}')" class="btn btn-sm btn-info">View</button>
                            <button onclick="deleteBooking('${booking.bookingId}')" class="btn btn-sm btn-danger">Delete</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
        }

        function confirmBooking(bookingId) {
            // Get all bookings
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            const booking = bookings.find(b => b.bookingId === bookingId);
            
            if (!booking) {
                alert('❌ Booking not found!');
                return;
            }
            
            // Check if booking is already confirmed
            if (booking.status === 'confirmed') {
                alert('✅ This booking is already confirmed!');
                return;
            }
            
            // Check if booking is already paid
            if (booking.status === 'paid') {
                alert('💰 This booking is already paid and confirmed!');
                return;
            }
            
            // Show confirmation dialog with booking details
            const confirmMessage = `
                🎯 CONFIRM BOOKING
                
                📋 Booking Details:
                • Name: ${booking.firstName} ${booking.lastName}
                • Email: ${booking.email}
                • Phone: ${booking.phone}
                • Room Type: ${booking.roomType}
                • Amount: GHS ${booking.amount}
                • Date: ${booking.date}
                • Booking ID: ${booking.bookingId}
                
                Are you sure you want to confirm this booking?
                
                ✅ This will change the status from '${booking.status}' to 'confirmed'
            `;
            
            if (confirm(confirmMessage)) {
                // Update booking status
                booking.status = 'confirmed';
                booking.confirmedAt = new Date().toISOString();
                booking.confirmedBy = currentUser ? currentUser.name : 'Admin';
                
                // Save updated bookings
                localStorage.setItem('bookings', JSON.stringify(bookings));
                
                // Update admin panel
                updateAdminPanel();
                
                // Show success message
                const successMessage = `
                    ✅ BOOKING CONFIRMED SUCCESSFULLY!
                    
                    📋 Confirmed Details:
                    • Name: ${booking.firstName} ${booking.lastName}
                    • Room: ${booking.roomType}
                    • Amount: GHS ${booking.amount}
                    • Status: Confirmed
                    • Confirmed by: ${booking.confirmedBy}
                    • Confirmed at: ${new Date(booking.confirmedAt).toLocaleString()}
                    
                    🎉 The student can now proceed with payment!
                `;
                
                alert(successMessage);
                
                // Log the action
                console.log(`Booking ${bookingId} confirmed by ${booking.confirmedBy} at ${booking.confirmedAt}`);
                
                // Update reports if on reports tab
                const reportsTab = document.getElementById('reportsTab');
                if (reportsTab && reportsTab.classList.contains('active')) {
                    updateReportsTab();
                }
            }
        }

        function viewBooking(bookingId) {
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            const booking = bookings.find(b => b.bookingId === bookingId);
            
            if (!booking) {
                alert('❌ Booking not found!');
                return;
            }
            
            // Create detailed booking view
            const statusEmoji = {
                'pending': '⏳',
                'confirmed': '✅',
                'paid': '💰',
                'cancelled': '❌'
            };
            
            const statusColor = {
                'pending': '#f39c12',
                'confirmed': '#27ae60',
                'paid': '#2ecc71',
                'cancelled': '#e74c3c'
            };
            
            const details = `
                📋 BOOKING DETAILS
                
                👤 Student Information:
                • Name: ${booking.firstName} ${booking.lastName}
                • Email: ${booking.email}
                • Phone: ${booking.phone}
                
                🏠 Room Information:
                • Room Type: ${booking.roomType}
                • Amount: GHS ${booking.amount}
                
                📅 Booking Information:
                • Booking ID: ${booking.bookingId}
                • Booking Date: ${booking.date}
                • Status: ${statusEmoji[booking.status] || '❓'} ${booking.status.toUpperCase()}
                
                ${booking.confirmedAt ? `
                ✅ Confirmation Details:
                • Confirmed by: ${booking.confirmedBy || 'Admin'}
                • Confirmed at: ${new Date(booking.confirmedAt).toLocaleString()}
                ` : ''}
                
                ${booking.paymentProof ? `
                💳 Payment Information:
                • Payment Proof: ${booking.paymentProof}
                ` : ''}
                
                📊 Current Status: ${booking.status.toUpperCase()}
            `;
            
            alert(details);
        }

        function deleteBooking(bookingId) {
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            const booking = bookings.find(b => b.bookingId === bookingId);
            
            if (!booking) {
                alert('❌ Booking not found!');
                return;
            }
            
            // Show detailed confirmation dialog
            const deleteMessage = `
                🗑️ DELETE BOOKING
                
                ⚠️ WARNING: This action cannot be undone!
                
                📋 Booking to Delete:
                • Name: ${booking.firstName} ${booking.lastName}
                • Email: ${booking.email}
                • Room Type: ${booking.roomType}
                • Amount: GHS ${booking.amount}
                • Status: ${booking.status}
                • Booking ID: ${booking.bookingId}
                • Date: ${booking.date}
                
                Are you absolutely sure you want to delete this booking?
                
                ❌ This will permanently remove the booking from the system.
            `;
            
            if (confirm(deleteMessage)) {
                // Remove the booking
                const filteredBookings = bookings.filter(b => b.bookingId !== bookingId);
                localStorage.setItem('bookings', JSON.stringify(filteredBookings));
                
                // Update admin panel
                updateAdminPanel();
                
                // Show success message
                const successMessage = `
                    ✅ BOOKING DELETED SUCCESSFULLY!
                    
                    📋 Deleted Booking:
                    • Name: ${booking.firstName} ${booking.lastName}
                    • Room: ${booking.roomType}
                    • Amount: GHS ${booking.amount}
                    • Booking ID: ${booking.bookingId}
                    
                    🗑️ The booking has been permanently removed from the system.
                `;
                
                alert(successMessage);
                
                // Log the action
                console.log(`Booking ${bookingId} deleted by ${currentUser ? currentUser.name : 'Admin'} at ${new Date().toISOString()}`);
                
                // Update reports if on reports tab
                const reportsTab = document.getElementById('reportsTab');
                if (reportsTab && reportsTab.classList.contains('active')) {
                    updateReportsTab();
                }
            }
        }

        // Admin tab navigation
        function showAdminTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            const selectedTab = document.getElementById(tabName + 'Tab');
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
            
            // Update content based on tab
            switch(tabName) {
                case 'dashboard':
                    updateAdminPanel();
                    break;
                case 'bookings':
                    updateBookingsTable(JSON.parse(localStorage.getItem('bookings') || '[]'));
                    break;
                case 'rooms':
                    updateRoomsTab();
                    break;
                case 'users':
                    updateUsersTab();
                    break;
                case 'reports':
                    updateReportsTab();
                    break;
            }
        }

        // Reports functions
        function updateReportsTab() {
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            updateBookingChart(bookings);
            updateRevenueChart(bookings);
            updateOccupancyChart(bookings);
        }

        function updateBookingChart(bookings) {
            const bookingChart = document.getElementById('bookingChart');
            if (bookingChart) {
                const total = bookings.length;
                const pending = bookings.filter(b => b.status === 'pending').length;
                const confirmed = bookings.filter(b => b.status === 'confirmed').length;
                
                bookingChart.innerHTML = `
                    <div style="text-align: center; padding: 1rem;">
                        <h5>Booking Statistics</h5>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1rem;">
                            <div style="background: #3498db; color: white; padding: 1rem; border-radius: 8px;">
                                <h3>${total}</h3>
                                <p>Total Bookings</p>
                            </div>
                            <div style="background: #f39c12; color: white; padding: 1rem; border-radius: 8px;">
                                <h3>${pending}</h3>
                                <p>Pending</p>
                            </div>
                            <div style="background: #27ae60; color: white; padding: 1rem; border-radius: 8px;">
                                <h3>${confirmed}</h3>
                                <p>Confirmed</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function updateRevenueChart(bookings) {
            const revenueChart = document.getElementById('revenueChart');
            if (revenueChart) {
                const totalRevenue = bookings.reduce((sum, booking) => sum + (booking.amount || 0), 0);
                const confirmedRevenue = bookings.filter(b => b.status === 'confirmed').reduce((sum, booking) => sum + (booking.amount || 0), 0);
                
                revenueChart.innerHTML = `
                    <div style="text-align: center; padding: 1rem;">
                        <h5>Revenue Statistics</h5>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-top: 1rem;">
                            <div style="background: #27ae60; color: white; padding: 1rem; border-radius: 8px;">
                                <h3>GHS ${totalRevenue.toLocaleString()}</h3>
                                <p>Total Revenue</p>
                            </div>
                            <div style="background: #e74c3c; color: white; padding: 1rem; border-radius: 8px;">
                                <h3>GHS ${confirmedRevenue.toLocaleString()}</h3>
                                <p>Confirmed Revenue</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function updateOccupancyChart(bookings) {
            const occupancyChart = document.getElementById('occupancyChart');
            if (occupancyChart) {
                const roomTypes = ['2-person', '2-person-prepaid', '3-person', '4-person', '6-person'];
                let html = '<div style="text-align: center; padding: 1rem;"><h5>Room Type Distribution</h5>';
                
                roomTypes.forEach(roomType => {
                    const count = bookings.filter(b => b.roomType === roomType).length;
                    if (count > 0) {
                        html += `
                            <div style="background: #f8f9fa; padding: 0.5rem; margin: 0.5rem 0; border-radius: 5px;">
                                <strong>${roomType}:</strong> ${count} bookings
                            </div>
                        `;
                    }
                });
                
                html += '</div>';
                occupancyChart.innerHTML = html;
            }
        }

        // Rooms functions
        function updateRoomsTab() {
            const roomStatusGrid = document.getElementById('roomStatusGrid');
            if (roomStatusGrid) {
                roomStatusGrid.innerHTML = '<p style="text-align: center; color: #6c757d;">Room management will be implemented soon.</p>';
            }
        }

        // Users functions
        function updateUsersTab() {
            const usersTableBody = document.getElementById('usersTableBody');
            if (usersTableBody) {
                const admins = JSON.parse(localStorage.getItem('admins') || '[]');
                usersTableBody.innerHTML = '';
                
                admins.forEach(admin => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${admin.name}</td>
                        <td>${admin.email}</td>
                        <td>${admin.role}</td>
                        <td>Active</td>
                        <td>Never</td>
                        <td>
                            <button class="btn btn-sm btn-secondary">Edit</button>
                            <button class="btn btn-sm btn-danger">Delete</button>
                        </td>
                    `;
                    usersTableBody.appendChild(row);
                });
            }
        }

        // Form validation and step navigation functions
        function nextStep() {
            if (currentStep === 1) {
                // Validate step 1 form
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const indexNumber = document.getElementById('indexNumber').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('email').value;
                const institution = document.getElementById('institution').value;
                const program = document.getElementById('program').value;
                const level = document.getElementById('level').value;
                const studentIdImage = document.getElementById('studentIdImage').files[0];
                const checkInDate = document.getElementById('checkInDate').value;

                if (!firstName || !lastName || !indexNumber || !phone || !email || 
                    !institution || !program || !level || !studentIdImage || !checkInDate) {
                    alert('Please fill in all required fields in Step 1.');
                    return;
                }

                // Move to step 2
                document.getElementById('step1Content').classList.add('hidden');
                document.getElementById('step2Content').classList.remove('hidden');
                currentStep = 2;
            } else if (currentStep === 2) {
                // Validate step 2 (room selection)
                if (!selectedRoom) {
                    alert('Please select a room type.');
                    return;
                }

                // Update payment summary
                const paymentSummary = document.getElementById('paymentSummary');
                const paymentAmount = document.getElementById('paymentAmount');
                const paymentReference = document.getElementById('paymentReference');
                const bedRoomType = document.getElementById('bedRoomType');

                paymentSummary.innerHTML = `
                    <h4>📋 Booking Summary</h4>
                    <p><strong>Room Type:</strong> ${selectedRoom.type}</p>
                    <p><strong>Amount:</strong> GHS ${selectedRoom.price}</p>
                    <p><strong>Student:</strong> ${document.getElementById('firstName').value} ${document.getElementById('lastName').value}</p>
                `;

                paymentAmount.textContent = `GHS ${selectedRoom.price}`;
                paymentReference.textContent = `${document.getElementById('firstName').value} ${document.getElementById('lastName').value}`;
                bedRoomType.textContent = selectedRoom.type;

                // Move to step 3
                document.getElementById('step2Content').classList.add('hidden');
                document.getElementById('step3Content').classList.remove('hidden');
                currentStep = 3;

                // Enable complete button if payment proof is uploaded
                checkCompleteButton();
            }
        }

        function prevStep() {
            if (currentStep === 2) {
                document.getElementById('step2Content').classList.add('hidden');
                document.getElementById('step1Content').classList.remove('hidden');
                currentStep = 1;
            } else if (currentStep === 3) {
                document.getElementById('step3Content').classList.add('hidden');
                document.getElementById('step2Content').classList.remove('hidden');
                currentStep = 2;
            }
        }

        function handlePaymentProofUpload(event) {
            const file = event.target.files[0];
            const filePreview = document.getElementById('filePreview');
            const previewImage = document.getElementById('previewImage');
            const fileInfo = document.getElementById('fileInfo');

            if (file) {
                // Show preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    filePreview.style.display = 'block';
                };
                reader.readAsDataURL(file);

                // Show file info
                fileInfo.innerHTML = `
                    <p><strong>File:</strong> ${file.name}</p>
                    <p><strong>Size:</strong> ${(file.size / 1024 / 1024).toFixed(2)} MB</p>
                    <p><strong>Type:</strong> ${file.type}</p>
                `;

                // Enable complete button
                checkCompleteButton();
            }
        }

        function checkCompleteButton() {
            const completeBtn = document.getElementById('completeBtn');
            const paymentProof = document.getElementById('paymentProof');
            
            if (selectedRoom && paymentProof.files && paymentProof.files[0]) {
                completeBtn.disabled = false;
                completeBtn.style.opacity = '1';
                completeBtn.style.cursor = 'pointer';
            } else {
                completeBtn.disabled = true;
                completeBtn.style.opacity = '0.6';
                completeBtn.style.cursor = 'not-allowed';
            }
        }

        // Add form validation listeners
        function addFormValidation() {
            // Step 1 form validation
            const step1Inputs = ['firstName', 'lastName', 'indexNumber', 'phone', 'email', 'institution', 'program', 'level', 'studentIdImage', 'checkInDate'];
            
            step1Inputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('change', validateStep1);
                    input.addEventListener('input', validateStep1);
                }
            });

            // Step 2 room selection validation
            document.querySelectorAll('.room-card').forEach(card => {
                card.addEventListener('click', validateStep2);
            });
        }

        function validateStep1() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const indexNumber = document.getElementById('indexNumber').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            const institution = document.getElementById('institution').value.trim();
            const program = document.getElementById('program').value.trim();
            const level = document.getElementById('level').value;
            const studentIdImage = document.getElementById('studentIdImage').files[0];
            const checkInDate = document.getElementById('checkInDate').value;

            const nextBtn = document.querySelector('button[onclick="nextStep()"]');
            if (nextBtn) {
                if (firstName && lastName && indexNumber && phone && email && 
                    institution && program && level && studentIdImage && checkInDate) {
                    nextBtn.disabled = false;
                    nextBtn.style.opacity = '1';
                    nextBtn.style.cursor = 'pointer';
                } else {
                    nextBtn.disabled = true;
                    nextBtn.style.opacity = '0.6';
                    nextBtn.style.cursor = 'not-allowed';
                }
            }
        }

        function validateStep2() {
            const nextBtn1 = document.getElementById('nextBtn1');
            if (nextBtn1 && selectedRoom) {
                nextBtn1.disabled = false;
                nextBtn1.style.opacity = '1';
                nextBtn1.style.cursor = 'pointer';
            } else if (nextBtn1) {
                nextBtn1.disabled = true;
                nextBtn1.style.opacity = '0.6';
                nextBtn1.style.cursor = 'not-allowed';
            }
        }

        // Map functions
        function openInMaps() {
            // Exact coordinates from Google Maps embed for Dei Gratia Hostel
            const latitude = 5.602285433184065;
            const longitude = -0.24256802575652556;
            const address = 'Dei Gratia Hostel (formerly Royal Hostel), Accra, Ghana';
            
            // Try to open in device's default map app
            if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {
                // iOS - open in Apple Maps
                window.open(`maps://maps.apple.com/?q=${encodeURIComponent(address)}&ll=${latitude},${longitude}`);
            } else if (navigator.userAgent.match(/Android/i)) {
                // Android - open in Google Maps
                window.open(`geo:${latitude},${longitude}?q=${encodeURIComponent(address)}`);
            } else {
                // Desktop - open in Google Maps web
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeLocalStorage();
            addFormValidation();
            console.log('Hostel booking system loaded successfully!');
        });
    </script>
</body>
</html> 